<!DOCTYPE html>
<html lang="pt-BR">
<head>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8542251167876044"
     crossorigin="anonymous"></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/Git Hub/Projetos/Trabalho/IMG/sqli.png" type="image/x-icon">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <title>Consultas SQL</title>
    <style>

        /* Estilos do corpo da página e containers */
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to right, #2e86de, #74b9ff);
            color: #fff;
            margin: 0;
            display: flex;
            padding: 2px;
            margin-right: 3px;
        margin-right: 3px;
        overflow-y: auto; /* Corrigido para permitir apenas um scroll vertical */
 /* Permite apenas um scroll vertical na página inteira */
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        .container {
            width: 65%;
            padding: 20px;
            background: #1e272e;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            margin-right: 10px;
            position: relative;
            resize: both;
            overflow-y: auto; /* Adicionado o scroll */
            min-width: 300px;
            min-height: 300px;
        }
        .text-block {
            margin-bottom: 15px;
            padding: 15px;
            background: #34495e;
            border-radius: 8px;
            position: relative;
        }
        .text-block h3 {
            margin: 0;
            color: #ecf0f1;
        }
        .text-block textarea {
            width: 100%;
            height: 30px;
            margin-top: 10px;
            border-radius: 8px;
            border: none;
            padding: 10px;
            font-size: 14px;
            background: #2c3e50;
            color: #fff;
            resize: none;
        }
        .text-block .copy-btn, .text-block .delete-btn, .text-block .edit-btn {
            position: absolute;
            top: 10px;
            background: #e74c3c; /* Cor do botão de excluir */
            border: none;
            color: #fff;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .text-block .copy-btn {
            right: 80px;
            background: #3498db; /* Cor do botão de copiar */
        }
        .text-block .copy-btn:hover {
            background: #2980b9;
        }
        .text-block .delete-btn {
            right: 10px;
        }
        .text-block .edit-btn {
            right: 150px;
            background: #f39c12; /* Cor do botão de editar */
        }
        .text-block .edit-btn:hover {
            background: #e67e22;
        }
        #add-text-form {
            margin-top: 20px;
        }
        #add-btn {
            width: 100%;
            padding: 10px;
            background: #27ae60;
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }
        #add-btn:hover {
            background: #229954;
        }
        .container2 {
            width: 30%;
            margin-right: 0;
            background: #2f3640;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            max-height: 90vh;
            overflow-y: auto; /* Adicionado o scroll */
        }
        .container2 h2 {
            font-size: 20px;
            margin-bottom: 10px;
            text-align: center;
        }
        .container2 pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-size: 14px;
            background: #34495e;
box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
max-height: 90vh;
    overflow-y: auto; /* Adicionado o scroll */
    resize: vertical; /* Permite redimensionar apenas verticalmente */
    min-height: 150px; /* Altura mínima */
            padding: 10px;
            border-radius: 8px;
            color: #fff;
            margin-top: 10px; /* Ajustado para mover mais para o topo */
        }
        #search-container {
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
        }
        #search-input {
            width: 60%;
            padding: 10px;
            border-radius: 5px;
            font-size: 16px;
            border: none;
            background: #ecf0f1;
        }
        #search-btn {
            padding: 10px 15px;
            background: #3498db;
            border: none;
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
        }
        #search-btn:hover {
            background: #2980b9;
        }/*
        .highlight {
            background-color: yellow;
            color: black;
        }*/



.highlight {
    color: yellow;
    background-color: transparent;
   /* animation: blink 1s infinite; /* Define a animação para piscar */
}

@keyframes blink {
    0% {
        opacity: 1; /* Visível */
    }
    50% {
        opacity: 0; /* Invisível */
    }
    100% {
        opacity: 1; /* Visível novamente */
    }
}

        /* Responsividade para telas menores */
        @media screen and (max-width: 1024px) {
            .container {
                width: 80%; 
                padding: 15px;
            }
            .container2 {
                width: 100%;
                padding: 15px;
            }
        }

        @media screen and (max-width: 768px) {
            .container {
                width: 100%; 
                padding: 10px;
            }
            .container2 {
                width: 100%;
                padding: 10px;
                position: absolute; /* Mover para segundo plano */
                top: 0;
                left: 0;
                z-index: -1; /* Coloca o container2 atrás */
                opacity: 0.5; /* Torna o container2 mais transparente */
            }
            #search-input {
                width: 80%; 
            }
            #search-btn {
                width: 15%;
            }
            #query-text {
                height: 80px; 
            }
        }

        @media screen and (max-width: 480px) {
            .container {
                width: 100%;
                padding: 5px;
            }
            .container2 {
                width: 100%;
                padding: 5px;
            }
            .text-block {
                padding: 8px; 
            }
            #query-text {
                height: 70px; 
                font-size: 12px;
            }
            #add-btn {
                padding: 8px;
                font-size: 14px;
            }
            #search-input {
                width: 75%;
            }
            #search-btn {
                width: 20%;
            }
        }




    </style>
</head>
<body>
    <div class="container">
        <h1>Sistema de Consultas SQL</h1>

<div id="search-container">
    <input type="text" id="search-input" placeholder="Pesquisar texto...">
    <button type="button" id="search-btn" onclick="searchText()">Pesquisar</button>
</div>


        <div id="text-list">
            <!-- Blocos de texto editáveis serão inseridos dinamicamente aqui -->
        </div>
        <form id="add-text-form">
            <input type="text" id="text-title" placeholder="Título do Texto" style="width: 100%; padding: 10px; border-radius: 8px; border: none; margin-bottom: 10px;">
            <textarea id="text-content" placeholder="Digite o conteúdo do texto aqui..." style="width: 100%; height: 100px; border-radius: 8px; padding: 10px;"></textarea>
            <button type="button" id="add-btn"><i class="fas fa-plus"></i> Adicionar Texto</button>
        </form>
    </div>
   <div class="container2">
        <h2>Campos de Exemplo</h2>
       <pre id="example-fields" contenteditable="true">
*************************************
S I S T E M A   E S T O Q U E
************************************* 
- Status das Ordens de Serviço (Campo STATUS2 Tabela TMOV):
  E - Encerrado
  S - Em Serviço
  A - Em Aberto 

- Status dos Movimentos (Campo STATUS Tabela TMOV):
  N - Normal
  F - Faturado
  P - Parc. Quitado
  Q - Quitado
  A - A Faturar
  C - Cancelado 

- Status dos Itens - TMoviItens (Campo STATUS Tabela TMOVITENS):
  A - Atendido
  D - Normal
  P - Parcial Atendido 

- Status dos Pedidos (Campo STATUSPEDIDO Tabela TMOV):
  P - Parcialmente Atendido
  A - Atendido
  D ou Vazio - Pendente 

- Status da Registradora (campo registarda Tabela TMOV):
  null - Movimento NÃO configurado para registradora;
  1 - Movimento configurado com Registradora, porém Venda ainda não foi registrada;
  2 - Movimento configurado com Registradora, Venda Registrada;      

>>Gerenciador Fiscal - Status NFS-e (Campo STATUS - Tabela: TNFEMUNICIPAL)
D - Digitação
P - Processamento
R - Rejeitada
E - Autorizada
C - Cancelada 

- Status NF-e - (Campo Statusnfe - Tabela: TNFE)
DIGITADA = '0'
AUTORIZADA = '1'
CANCELADA = '2'
DENEGADA = '3'
PROCESSAMENTO = '4'
REJEITADA = '5'
INUTILIZADA = '6'   

- Status NF-e Finalidade da Emissão - (Campo: NFEFINALIDADEEMISSAO - Tabela TMOV)
NORMAL = 0 e 1
COMPLEMENTAR = 2
AJSUTE = 3
DEVOLUÇÃO = 4 

- Status CT-e - (Campo STATUS - Tabela: TCTE)
CS_PROCESSAMENTO = 'P';
CS_DIGITACAO = 'D';
CS_REJEITADO = 'R';
CS_AUTORIZADO = 'A';
CS_CANCELADO = 'C';  

- Status Manifesto do Destinatário Eletrônico - MDF-e (Campo STATUS - Tabela: TDFE)
DIGITACAO = 0;
PROCESSAMENTO = 1;
AUTORIZADO = 2;
ENCERRADO = 3;
REJEITADO = 4;
CANCELADO = 5; 

- Status Manifesto do Destinatário - MD-e (Campo TPFE - Tabela: TDFE)
CS_DIGITACAO = 0;
CS_PROCESSAMENTO = 1;
CS_AUTORIZADO = 2;
CS_ENCERRADO = 3;
CS_REJEITADO = 4;
CS_CANCELADO = 5; 

- Status MDF-e (Campo STATUS - Tabela: TMDFE)
DIGITACAO = 0;
PROCESSAMENTO = 1;
AUTORIZADO = 2;
ENCERRADO = 3;
REJEITADO = 4;
CANCELADO = 5; 

Exemplo SQL para manter o Lançamento como Encerrado:
update tmdfe set STATUS = 3 where idmov = ???? 
*************************************
S I S T E M A   F I N A N C E I R O
*************************************
- Status dos Lançamentos:
  A - Aberto
  B - Baixado
  C - Cancelado
  F - Faturado
 </pre>
    </div>

    <script src="./2.js"></script>

<script>
// Elementos do DOM
const addButton = document.getElementById("add-btn");
const textList = document.getElementById("text-list");
const textTitle = document.getElementById("text-title");
const textContent = document.getElementById("text-content");

// Recuperar textos do localStorage
let texts = JSON.parse(localStorage.getItem("texts")) || [];

// Exibir os textos salvos ao carregar a página
function exibirTextos() {
    textList.innerHTML = "";
    texts.forEach((text, index) => {
        const textBlock = document.createElement("div");
        textBlock.classList.add("text-block");
        
        // Destacar o título com base no termo de busca
        const highlightedTitle = destacarTexto(text.title, document.getElementById("search-input").value);
        
        // Criar HTML para o bloco de texto
        textBlock.innerHTML = `
            <h3>${highlightedTitle || "Sem Título"}</h3>
            <textarea readonly>${text.content}</textarea>
            <button class="edit-btn" onclick="editarTexto(${index})"><i class="fas fa-edit"></i> Editar</button>
            <button class="copy-btn" onclick="copiarTexto(${index})"><i class="fas fa-copy"></i> Copiar</button>
            <button class="delete-btn" onclick="excluirTexto(${index})"><i class="fas fa-trash"></i> Excluir</button>
        `;
        textList.appendChild(textBlock);
    });
}

// Salvar os textos no localStorage
function salvarTextos() {
    localStorage.setItem("texts", JSON.stringify(texts));
}

// Adicionar novo texto
addButton.addEventListener("click", () => {
    const title = textTitle.value.trim();
    const content = textContent.value.trim();
    if (title || content) {
        texts.push({ title, content });
        salvarTextos();
        exibirTextos();
        textTitle.value = "";
        textContent.value = "";
    }
});

// Editar texto
function editarTexto(index) {
    const title = prompt("Novo título", texts[index].title);
    const content = prompt("Novo conteúdo", texts[index].content);
    if (title !== null && content !== null) {
        texts[index].title = title;
        texts[index].content = content;
        salvarTextos();
        exibirTextos();
    }
}

// Copiar texto
function copiarTexto(index) {
    navigator.clipboard.writeText(texts[index].content);
}

// Excluir texto
function excluirTexto(index) {
    if (confirm("Você tem certeza que deseja excluir este texto?")) {
        texts.splice(index, 1);
        salvarTextos();
        exibirTextos();
    }
}

// Função para destacar o texto encontrado na pesquisa
function destacarTexto(text, termoDeBusca) {
    if (!termoDeBusca) return text; // Se não houver termo de busca, retorna o texto original
    const regex = new RegExp(`(${termoDeBusca})`, 'gi'); // Cria uma regex para destacar o termo
    return text.replace(regex, '<span class="highlight">$1</span>'); // Envolve o termo com a tag <span> para destacar
}

// Função de busca de texto em tempo real
function buscarTexto() {
    const termoDeBusca = document.getElementById("search-input").value.trim().toLowerCase();
    const textBlocks = document.querySelectorAll(".text-block");
    
    // Pesquisa em todos os campos, incluindo container2 e example-fields
    const searchFields = document.querySelectorAll("#container2, #example-fields, .text-block");

    searchFields.forEach(field => {
        const title = field.querySelector("h3") ? field.querySelector("h3").textContent.toLowerCase() : '';
        const content = field.querySelector("textarea") ? field.querySelector("textarea").value.toLowerCase() : '';
        
        if (title.includes(termoDeBusca) || content.includes(termoDeBusca)) {
            field.classList.add("highlight");
        } else {
            field.classList.remove("highlight");
        }

        // Destacar o título
        const highlightedTitle = destacarTexto(field.querySelector("h3") ? field.querySelector("h3").textContent : '', termoDeBusca);
        if (field.querySelector("h3")) {
            field.querySelector("h3").innerHTML = highlightedTitle; // Aplica o destaque no título
        }
    });
}

// Adicionar evento de busca ao campo de pesquisa
document.getElementById("search-btn").addEventListener("click", buscarTexto);
document.getElementById("search-input").addEventListener("input", buscarTexto);

// Filtrar textos com base na pesquisa
function filtrarTextos() {
    const termoDeBusca = document.getElementById("search-input").value.trim().toLowerCase();
    const textosFiltrados = texts.filter(text => 
        text.title.toLowerCase().includes(termoDeBusca) || text.content.toLowerCase().includes(termoDeBusca)
    );
    exibirTextosFiltrados(textosFiltrados);
}

// Modificar a função exibirTextos para aceitar uma lista personalizada de textos
function exibirTextosFiltrados(textosFiltrados = texts) {
    textList.innerHTML = "";
    textosFiltrados.forEach((text, index) => {
        const textBlock = document.createElement("div");
        textBlock.classList.add("text-block");
        
        // Destacar no título
        const highlightedTitle = destacarTexto(text.title, document.getElementById("search-input").value);

        // Criar HTML com título destacado
        textBlock.innerHTML = `
            <h3>${highlightedTitle || "Sem Título"}</h3>
            <textarea readonly>${text.content}</textarea>
            <button class="edit-btn" onclick="editarTexto(${index})"><i class="fas fa-edit"></i> Editar</button>
            <button class="copy-btn" onclick="copiarTexto(${index})"><i class="fas fa-copy"></i> Copiar</button>
            <button class="delete-btn" onclick="excluirTexto(${index})"><i class="fas fa-trash"></i> Excluir</button>
        `;
        textList.appendChild(textBlock);
    });
}

// Iniciar exibição dos textos ao carregar a página
window.onload = exibirTextos;


</script>

<script>

</script>
</body>
</html>
